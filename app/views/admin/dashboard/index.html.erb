<br>
<br>
<br>
<h1>Treinos</h1>
<br>
<hr>
<br>
<br>
<div class="container">
  <div class="row ">
  <% @trainings.each do |training| %>
      <div class="col col-md-3">
        <div class="card" style="margin-bottom:30px;">
          <div class="card-body">
            <h5 class="card-title"><%= training.title %></h5>
            <% training.item_trainings.each do |item|%>
              <div class="accordion" id="accordionExample<%= training.title.split(" ").last%>">
                <div class="card">
                  <div class="card-header" id="heading<%= training.title.split(" ").last%>">
                    <h2 class="mb-0">
                      <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse<%= training.title.split(" ").last%>-<%= item.exercise.id %>" aria-expanded="true" aria-controls="collapse<%= training.title.split(" ").last%>-<%= item.exercise.id %>">
                        <%= item.exercise.name.upcase %>
                      </button>
                    </h2>
                  </div>
                  <div id="collapse<%= training.title.split(" ").last%>-<%= item.exercise.id %>" class="collapse" aria-labelledby="heading<%= training.title.split(" ").last%>" data-parent="#accordionExample<%= training.title.split(" ").last%>">
                    <div class="card-body">
                      <ul class="list-group">
                        <%item.exercise.item_exercises.each do |item_ex|%>
                          <li class="list-group-item">
                            <small><%= item_ex.name.capitalize %></small>
                            <a href="#" class="btn btn-default" data-toggle="modal" data-target="#videoModal" data-theVideo="http://www.youtube.com/embed/<%= item_ex.guide.split('watch?v=')[1] %>">
                              <%= octicon "link-external", :height => 16 %>
                            </a>
                          </li>
                        <% end %>
                      </ul>
                    </div>
                  </div>
                </div>
                <br>
              </div>
            <% end %>
          </div>
        </div>
      </div>
  <% end %>
  </div>
</div>
<br>
<br>
<%# <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p> %>
<%# <a href="#" class="card-link">Card link</a>
      <a href="#" class="card-link">Another link</a> %>
<div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <div>
          <iframe width="100%" height="350" src=""></iframe>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  //FUNCTION TO GET AND AUTO PLAY YOUTUBE VIDEO FROM DATATAG
  function autoPlayYouTubeModal(){
    var trigger = $("body").find('[data-toggle="modal"]');
    trigger.click(function() {
      var theModal = $(this).data( "target" ),
      videoSRC = $(this).attr( "data-theVideo" ),
      videoSRCauto = videoSRC+"?autoplay=1" ;
      $(theModal+' iframe').attr('src', videoSRCauto);
      $(theModal+' button.close').click(function () {
  $(theModal+' iframe').attr('src', videoSRC);
      });
    });
  }
  $(document).ready(function(){
    autoPlayYouTubeModal();
  });
</script>
